<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#001F3F">
    <title>Book Your Car Wash - 3ON Mobile Car Wash</title>

    <!-- Preconnect to external domains for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <!-- Preload critical CSS with high priority -->
    <link rel="preload" href="styles.css" as="style" fetchpriority="high">
    <link rel="preload" href="wizard.css" as="style" fetchpriority="high">

    <!-- Load CSS asynchronously to avoid render blocking -->
    <link rel="stylesheet" href="styles.css" media="print" onload="this.media='all'; this.onload=null;">
    <link rel="stylesheet" href="wizard.css" media="print" onload="this.media='all'; this.onload=null;">

    <!-- Fallback for browsers without JS -->
    <noscript>
        <link rel="stylesheet" href="styles.css">
        <link rel="stylesheet" href="wizard.css">
    </noscript>

    <!-- Preload font files for faster text rendering -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Inter:wght@400;600;700&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'; this.onload=null;">

    <!-- Fallback for fonts -->
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    </noscript>
</head>
<body>
    <!-- Loading Animation -->
    <div id="page-loader" class="page-loader">
        <div class="loader-content">
            <div class="spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <div class="loader-logo">3ON</div>
            <p class="loader-text">Loading...</p>
        </div>
    </div>

    <!-- Simple Header -->
    <header class="wizard-header">
        <div class="container">
            <a href="index.html" class="back-link">‚Üê Back to Home</a>
            <h1>Book Your Car Wash</h1>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="container">
            <div class="progress-steps">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <span>Vehicle</span>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <span>Package</span>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <span>Date & Time</span>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <span>Location</span>
                </div>
                <div class="step" data-step="5">
                    <div class="step-number">5</div>
                    <span>Payment</span>
                </div>
                <div class="step" data-step="6">
                    <div class="step-number">6</div>
                    <span>Contact</span>
                </div>
                <div class="step" data-step="7">
                    <div class="step-number">7</div>
                    <span>Confirm</span>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- Wizard Content -->
    <div class="wizard-content">
        <div class="container">
            <!-- Step 1: Vehicle Selection -->
            <div class="wizard-step active" id="step-1">
                <h2>Select Your Vehicle Type</h2>
                <div class="vehicle-grid">
                    <div class="vehicle-card" data-vehicle="sedan">
                        <div class="vehicle-icon">üöó</div>
                        <h3>Sedan</h3>
                        <button class="select-vehicle-btn">Select Sedan</button>
                    </div>
                    <div class="vehicle-card" data-vehicle="suv">
                        <div class="vehicle-icon">üöô</div>
                        <h3>SUV</h3>
                        <button class="select-vehicle-btn">Select SUV</button>
                    </div>
                    <div class="vehicle-card" data-vehicle="motorcycle">
                        <div class="vehicle-icon">üèçÔ∏è</div>
                        <h3>Motorcycle</h3>
                        <button class="select-vehicle-btn">Select Motorcycle</button>
                    </div>
                    <div class="vehicle-card" data-vehicle="boat">
                        <div class="vehicle-icon">üö§</div>
                        <h3>Boat</h3>
                        <button class="select-vehicle-btn">Select Boat</button>
                    </div>
                    <div class="vehicle-card" data-vehicle="caravan">
                        <div class="vehicle-icon">üöê</div>
                        <h3>Caravan</h3>
                        <button class="select-vehicle-btn">Select Caravan</button>
                    </div>
                </div>

                <!-- Boat Size Selection (hidden initially) -->
                <div id="boat-sizes" class="sub-selection" style="display:none;">
                    <h3>Select Boat Size</h3>
                    <div class="size-options">
                        <label class="radio-option">
                            <input type="radio" name="boat-size" value="small">
                            <span>Small (up to 20 ft)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="boat-size" value="medium">
                            <span>Medium (21-30 ft)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="boat-size" value="large">
                            <span>Large (31+ ft)</span>
                        </label>
                    </div>
                    <button class="btn btn-primary confirm-boat-btn">Continue</button>
                </div>

                <!-- Caravan Length Selection (hidden initially) -->
                <div id="caravan-lengths" class="sub-selection" style="display:none;">
                    <h3>Select Caravan Length</h3>
                    <div class="size-options">
                        <label class="radio-option">
                            <input type="radio" name="caravan-length" value="short">
                            <span>Short (up to 20 ft)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="caravan-length" value="medium">
                            <span>Medium (21-30 ft)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="caravan-length" value="long">
                            <span>Long (31+ ft)</span>
                        </label>
                    </div>
                    <button class="btn btn-primary confirm-caravan-btn">Continue</button>
                </div>
            </div>

            <!-- Step 2: Package Selection -->
            <div class="wizard-step" id="step-2">
                <!-- Package Header with Subscription Toggle -->
                <div class="package-header">
                    <h2>Select Your Package</h2>
                    <div class="subscription-toggle-compact">
                        <label class="toggle-switch-small">
                            <input type="checkbox" id="monthly-subscription">
                            <span class="toggle-slider-small"></span>
                        </label>
                        <div class="toggle-label-small">
                            <span>Monthly (4x) - Save 7.5%</span>
                        </div>
                    </div>
                </div>

                <div class="packages-grid">
                    <div class="package-card" data-package="platinum">
                        <div class="package-icon">ü•à</div>
                        <h3>Platinum</h3>
                        <div class="package-price" id="platinum-price">AED 45</div>
                        <ul>
                            <li>Exterior wash</li>
                            <li>Tire cleaning</li>
                            <li>Windows</li>
                            <li>Basic interior vacuum</li>
                        </ul>
                        <button class="select-package-btn">Select Platinum</button>
                    </div>
                    <div class="package-card featured" data-package="titanium">
                        <div class="badge">Popular</div>
                        <div class="package-icon">‚ö°</div>
                        <h3>Titanium</h3>
                        <div class="package-price" id="titanium-price">AED 80</div>
                        <ul>
                            <li>Everything in Platinum</li>
                            <li>Dashboard polish</li>
                            <li>Seat cleaning</li>
                            <li>Air freshener</li>
                        </ul>
                        <button class="select-package-btn">Select Titanium</button>
                    </div>
                    <div class="package-card disabled" data-package="diamond">
                        <div class="package-icon">üíé</div>
                        <h3>Diamond</h3>
                        <div class="coming-soon-badge">Coming Soon</div>
                        <ul>
                            <li>Premium full detailing</li>
                            <li>Deep interior clean</li>
                            <li>Exterior wax & polish</li>
                            <li>Paint protection</li>
                        </ul>
                        <button class="select-package-btn" disabled>Coming Soon</button>
                    </div>
                </div>

                <!-- Multi-Vehicle Option -->
                <div class="multi-vehicle-section" style="display:none;">
                    <div class="info-banner">
                        <p>üí° <strong>Washing multiple vehicles?</strong> Add another vehicle and enjoy your booking!</p>
                        <button class="btn btn-outline add-vehicle-btn" id="add-vehicle-btn">
                            <span>+ Add Another Vehicle</span>
                        </button>
                    </div>

                    <!-- Additional Vehicles List -->
                    <div id="additional-vehicles-list" class="additional-vehicles"></div>
                </div>

                <div class="wizard-actions">
                    <button class="btn btn-secondary prev-btn">Previous</button>
                </div>
            </div>

            <!-- Step 3: Date & Time -->
            <div class="wizard-step" id="step-3">
                <h2>Choose Date & Time</h2>

                <!-- Hidden inputs for form compatibility -->
                <input type="hidden" id="booking-date" required>
                <input type="hidden" id="booking-time" required>

                <!-- Date Selection: Sliding Week View -->
                <div class="date-selector-section">
                    <h3>Select Date</h3>
                    <div class="week-slider-container">
                        <button class="slider-nav-btn prev-week" id="prev-week-btn">
                            <span>‚Äπ</span>
                        </button>
                        <div class="week-slider" id="week-slider">
                            <!-- Days will be populated by JavaScript -->
                        </div>
                        <button class="slider-nav-btn next-week" id="next-week-btn">
                            <span>‚Ä∫</span>
                        </button>
                    </div>
                    <button type="button" class="btn-pick-date" id="pick-another-date-btn">
                        üìÖ Pick Another Date
                    </button>
                    <!-- Fallback date picker (hidden by default) -->
                    <div id="fallback-date-picker" style="display:none;">
                        <input type="date" id="fallback-date-input">
                        <button type="button" class="btn btn-secondary btn-sm" id="confirm-fallback-date">Confirm</button>
                    </div>
                </div>

                <!-- Time Selection: Sliding Time Slots -->
                <div class="time-selector-section">
                    <h3>Select Time</h3>
                    <p class="time-hint">Available: 12:00 PM - 12:00 AM (Midnight)</p>
                    <div class="time-slots-grid" id="time-slots-grid">
                        <!-- Time slots will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Legend -->
                <div class="booking-legend">
                    <div class="legend-item">
                        <span class="legend-dot available"></span>
                        <span>Available</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot booked"></span>
                        <span>Booked</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot past"></span>
                        <span>Past</span>
                    </div>
                </div>

                <div class="wizard-actions">
                    <button class="btn btn-secondary prev-btn">Previous</button>
                    <button class="btn btn-primary next-btn">Next</button>
                </div>
            </div>

            <!-- Step 4: Location -->
            <div class="wizard-step" id="step-4">
                <h2>Where Should We Come?</h2>

                <!-- Geolocation Button -->
                <div class="location-action">
                    <button type="button" class="btn btn-primary" id="use-location-btn">
                        üìç Use My Current Location
                    </button>
                    <p class="location-hint">Or enter your location manually below</p>
                </div>

                <!-- Hidden fields for coordinates -->
                <input type="hidden" id="latitude">
                <input type="hidden" id="longitude">

                <!-- Required Fields -->
                <div class="form-row">
                    <div class="form-group half">
                        <label>Villa/Form Number *</label>
                        <input type="text" id="villa-number" placeholder="e.g., Villa 123, M-15" required>
                    </div>
                    <div class="form-group half">
                        <label>Street Number *</label>
                        <input type="text" id="street-number" placeholder="e.g., Street 45" required>
                    </div>
                </div>

                <!-- Optional Fields -->
                <div class="form-group">
                    <label>City</label>
                    <select id="city">
                        <option value="">Select city (Optional)</option>
                        <option value="Dubai">Dubai</option>
                        <option value="Sharjah" selected>Sharjah</option>
                        <option value="Ajman">Ajman</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Area/Neighborhood (Optional)</label>
                    <input type="text" id="area" placeholder="e.g., Al Nahda, Al Majaz, Al Khan">
                </div>

                <div class="form-group">
                    <label>Building/Complex Name (Optional)</label>
                    <input type="text" id="building-name" placeholder="e.g., Marina Residences, Al Noor Tower">
                </div>

                <div class="form-group">
                    <label>Special Instructions</label>
                    <textarea id="special-instructions" placeholder="e.g., Parking in basement level 2, Gate code: 1234, Ask security for access" rows="3"></textarea>
                </div>

                <!-- Optional Contact Section -->
                <div class="optional-contact-section">
                    <div class="section-header">
                        <label class="checkbox-label">
                            <input type="checkbox" id="add-contact-now">
                            <span>Add contact details now (or add in next step)</span>
                        </label>
                    </div>
                    <div id="contact-fields" class="contact-fields" style="display:none;">
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="tel" id="customer-phone-optional" placeholder="050 123 4567">
                        </div>
                    </div>
                </div>

                <div class="wizard-actions">
                    <button class="btn btn-secondary prev-btn">Previous</button>
                    <button class="btn btn-primary next-btn">Next</button>
                </div>
            </div>

            <!-- Step 5: Payment Method -->
            <div class="wizard-step" id="step-5">
                <h2>Choose Payment Method</h2>
                <p class="info-text">Select how you'd like to pay for your service</p>

                <div class="payment-methods-grid">
                    <div class="payment-card" data-payment="link">
                        <div class="payment-icon">üí≥</div>
                        <h3>Link Payment</h3>
                        <p>Pay securely online with your card</p>
                        <button class="select-payment-btn">Select Link Payment</button>
                    </div>

                    <div class="payment-card" data-payment="transfer">
                        <div class="payment-icon">üè¶</div>
                        <h3>Bank Transfer</h3>
                        <p>Transfer to our bank account</p>
                        <button class="select-payment-btn">Select Transfer</button>
                    </div>

                    <div class="payment-card" data-payment="cash">
                        <div class="payment-icon">üíµ</div>
                        <h3>Cash</h3>
                        <p>Pay with cash on service delivery</p>
                        <button class="select-payment-btn">Select Cash</button>
                    </div>
                </div>

                <div class="wizard-actions">
                    <button class="btn btn-secondary prev-btn">Previous</button>
                </div>
            </div>

            <!-- Step 6: Contact Information -->
            <div class="wizard-step" id="step-6">
                <h2>Your Contact Information</h2>
                <p class="info-text">We'll save your information for faster bookings next time</p>

                <div class="form-group">
                    <label>Full Name *</label>
                    <input type="text" id="customer-name" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label>Phone Number *</label>
                    <input type="tel" id="customer-phone" placeholder="050 123 4567" required>
                </div>
                <div class="form-group">
                    <label>Email (Optional)</label>
                    <input type="email" id="customer-email" placeholder="your@email.com">
                </div>
                <div class="wizard-actions">
                    <button class="btn btn-secondary prev-btn">Previous</button>
                    <button class="btn btn-primary next-btn">Next</button>
                </div>
            </div>

            <!-- Step 7: Confirmation -->
            <div class="wizard-step" id="step-7">
                <h2>Confirm Your Booking</h2>
                <div class="booking-summary">
                    <div class="summary-section">
                        <h3>Vehicle</h3>
                        <p id="summary-vehicle"></p>
                    </div>
                    <div class="summary-section">
                        <h3>Package & Price</h3>
                        <p id="summary-package"></p>
                    </div>
                    <div class="summary-section">
                        <h3>Date & Time</h3>
                        <p id="summary-datetime"></p>
                    </div>
                    <div class="summary-section">
                        <h3>Location</h3>
                        <p id="summary-location"></p>
                    </div>
                    <div class="summary-section">
                        <h3>Payment Method</h3>
                        <p id="summary-payment"></p>
                    </div>
                    <div class="summary-section">
                        <h3>Contact</h3>
                        <p id="summary-contact"></p>
                    </div>
                </div>
                <div class="wizard-actions">
                    <button class="btn btn-secondary prev-btn">Previous</button>
                    <button class="btn btn-primary confirm-btn">Confirm & Send via WhatsApp</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Load JavaScript with defer for better performance -->
    <script src="script.js" defer></script>
    <script src="wizard.js" defer></script>
</body>
</html>
